<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de NÃ³mina</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-slate-900 text-white min-h-screen font-sans">

    <header class="p-6 bg-slate-800 border-b border-slate-700 text-center">
        <h1 class="text-2xl font-extrabold tracking-tight text-blue-400">CALCULADORA DE NÃ“MINA</h1>
    </header>

    <main class="p-4 max-w-lg mx-auto">
        <div class="bg-slate-800 p-4 mb-6 rounded-lg border border-dashed border-slate-600 text-center text-xs text-slate-500">
            PUBLICIDAD - Consigue VersiÃ³n Pro para eliminar
        </div>

        <div class="flex bg-slate-800 p-1 rounded-xl mb-6 text-sm">
            <button onclick="setModo('mes')" id="btn-mes" class="flex-1 py-2 rounded-lg bg-blue-600 font-bold text-white transition">Mensual</button>
            <button onclick="setModo('semana')" id="btn-semana" class="flex-1 py-2 rounded-lg font-bold text-slate-400 transition">Semanal</button>
            <button onclick="setModo('horas')" id="btn-horas" class="flex-1 py-2 rounded-lg font-bold text-slate-400 transition">Por Horas</button>
        </div>

        <section class="space-y-4">
            <div>
                <label class="text-xs font-bold text-slate-400 uppercase">PaÃ­s de Residencia</label>
                <select id="pais" class="w-full bg-slate-800 border border-slate-700 p-3 rounded-xl mt-1 focus:ring-2 focus:ring-blue-500 outline-none">
                    <option value="ES">EspaÃ±a ðŸ‡ªðŸ‡¸</option>
                    <option value="IT">Italia ðŸ‡®ðŸ‡¹</option>
                    <option value="PT">Portugal ðŸ‡µðŸ‡¹</option>
                    <option value="UK">Reino Unido ðŸ‡¬ðŸ‡§</option>
                </select>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label id="label-salario" class="text-xs font-bold text-slate-400 uppercase">Salario Base (â‚¬)</label>
                    <input type="number" id="salario" class="w-full bg-slate-800 border border-slate-700 p-3 rounded-xl mt-1 text-lg" placeholder="0.00">
                </div>
                <div>
                    <label id="label-tiempo" class="text-xs font-bold text-slate-400 uppercase">DÃ­as trabajados</label>
                    <input type="number" id="tiempo" class="w-full bg-slate-800 border border-slate-700 p-3 rounded-xl mt-1 text-lg" placeholder="Ej: 30">
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="text-xs font-bold text-slate-400 uppercase">Bonus Extra (â‚¬)</label>
                    <input type="number" id="bonus" class="w-full bg-slate-800 border border-slate-700 p-3 rounded-xl mt-1" placeholder="Opcional">
                </div>
                <div>
                    <label class="text-xs font-bold text-slate-400 uppercase">Prorrata Vacaciones (â‚¬)</label>
                    <input type="number" id="prorrata" class="w-full bg-slate-800 border border-slate-700 p-3 rounded-xl mt-1" placeholder="Opcional">
                </div>
            </div>

            <div class="p-4 bg-slate-800 border border-slate-700 rounded-xl">
                <div class="flex items-center justify-between mb-2">
                    <label class="text-xs font-bold text-slate-400 uppercase">PensiÃ³n Privada / Auto-Enrolment</label>
                    <input type="checkbox" id="check-pension" onchange="togglePension()" class="w-4 h-4 accent-blue-500">
                </div>
                <div id="input-pension" class="hidden">
                    <input type="number" id="pension-porcentaje" class="w-full bg-slate-900 border border-slate-600 p-2 rounded-lg text-sm mt-1" placeholder="Porcentaje a deducir (Ej: 5%)">
                </div>
            </div>

            <button onclick="calcular()" class="w-full bg-blue-600 py-4 rounded-2xl text-xl font-black shadow-lg shadow-blue-900/20 active:scale-95 transition-transform mt-4">
                CALCULAR NETO
            </button>
        </section>

        <section id="result-card" class="hidden mt-8 bg-gradient-to-br from-blue-600 to-blue-800 rounded-3xl p-6 shadow-2xl relative overflow-hidden">
            <div class="relative z-10 text-white">
                <p class="text-sm opacity-80 font-bold uppercase mb-1">Total a Percibir</p>
                <h2 id="neto-display" class="text-4xl font-black mb-4">0.00â‚¬</h2>
                
                <div class="space-y-2 text-sm border-t border-blue-400/30 pt-4">
                    <div class="flex justify-between text-blue-200"><span>Salario Bruto Total:</span><span id="bruto-display">0.00â‚¬</span></div>
                    <div class="flex justify-between text-red-300"><span>Seguridad Social:</span><span id="ss-display">-0.00â‚¬</span></div>
                    <div class="flex justify-between text-red-300"><span>Impuestos (IRPF/Tax):</span><span id="tax-display">-0.00â‚¬</span></div>
                    <div id="row-pension" class="flex justify-between text-yellow-300 hidden"><span>PensiÃ³n:</span><span id="pension-display">-0.00â‚¬</span></div>
                </div>
            </div>
        </section>

        <div class="mt-8 text-center pb-8">
            <button class="bg-gradient-to-r from-yellow-500 to-orange-500 text-slate-900 px-8 py-3 rounded-full font-bold text-sm shadow-xl w-full">
                <i class="fa-solid fa-crown mr-2"></i> VERSIÃ“N PRO (2.99â‚¬/aÃ±o)
            </button>
        </div>
    </main>

    <script>
        let modoActual = 'mes';

        function setModo(modo) {
            modoActual = modo;
            
            // Actualizar botones
            const botones = ['mes', 'semana', 'horas'];
            botones.forEach(b => {
                const btn = document.getElementById(`btn-${b}`);
                if(b === modo) {
                    btn.classList.replace('text-slate-400', 'text-white');
                    btn.classList.replace('bg-transparent', 'bg-blue-600');
                    if(!btn.classList.contains('bg-blue-600')) btn.classList.add('bg-blue-600');
                } else {
                    btn.classList.replace('text-white', 'text-slate-400');
                    btn.classList.remove('bg-blue-600');
                }
            });

            // Cambiar textos segÃºn el modo
            const labelSalario = document.getElementById('label-salario');
            const labelTiempo = document.getElementById('label-tiempo');
            const inputTiempo = document.getElementById('tiempo');

            if(modo === 'mes') {
                labelSalario.innerText = 'Salario Mensual (â‚¬)';
                labelTiempo.innerText = 'DÃ­as trabajados';
                inputTiempo.placeholder = 'Ej: 30';
            } else if(modo === 'semana') {
                labelSalario.innerText = 'Salario Semanal (â‚¬)';
                labelTiempo.innerText = 'DÃ­as trabajados';
                inputTiempo.placeholder = 'Ej: 5';
            } else if(modo === 'horas') {
                labelSalario.innerText = 'Precio por Hora (â‚¬)';
                labelTiempo.innerText = 'Horas totales';
                inputTiempo.placeholder = 'Ej: 40';
            }
        }

        function togglePension() {
            const isChecked = document.getElementById('check-pension').checked;
            document.getElementById('input-pension').classList.toggle('hidden', !isChecked);
        }

        function calcular() {
            const pais = document.getElementById('pais').value;
            const salarioInput = parseFloat(document.getElementById('salario').value) || 0;
            const tiempoInput = parseFloat(document.getElementById('tiempo').value) || 0;
            const bonus = parseFloat(document.getElementById('bonus').value) || 0;
            const prorrata = parseFloat(document.getElementById('prorrata').value) || 0;
            
            // Calcular base segÃºn el modo
            let baseSalarial = 0;
            if (modoActual === 'horas') {
                baseSalarial = salarioInput * tiempoInput; // Precio hora * Horas
            } else {
                baseSalarial = salarioInput; // Si es mes o semana, tomamos la base fija indicada
            }

            const totalBruto = baseSalarial + bonus + prorrata;

            // Porcentajes ficticios bÃ¡sicos para demostraciÃ³n
            let taxRate = 0.15;
            let ssRate = 0.06;

            if(pais === 'ES') { taxRate = 0.15; ssRate = 0.0635; }
            if(pais === 'IT') { taxRate = 0.23; ssRate = 0.09; }
            if(pais === 'PT') { taxRate = 0.15; ssRate = 0.11; }
            if(pais === 'UK') { taxRate = 0.20; ssRate = 0.08; }

            const ssDescuento = totalBruto * ssRate;
            const taxDescuento = (totalBruto - ssDescuento) * taxRate;
            
            // PensiÃ³n opcional
            let pensionDescuento = 0;
            const usaPension = document.getElementById('check-pension').checked;
            if(usaPension) {
                const porcentajePension = parseFloat(document.getElementById('pension-porcentaje').value) || 0;
                pensionDescuento = totalBruto * (porcentajePension / 100);
            }

            const netoFinal = totalBruto - ssDescuento - taxDescuento - pensionDescuento;

            // Mostrar resultados en pantalla
            document.getElementById('bruto-display').innerText = totalBruto.toFixed(2) + 'â‚¬';
            document.getElementById('neto-display').innerText = netoFinal.toFixed(2) + 'â‚¬';
            document.getElementById('ss-display').innerText = '-' + ssDescuento.toFixed(2) + 'â‚¬';
            document.getElementById('tax-display').innerText = '-' + taxDescuento.toFixed(2) + 'â‚¬';
            
            const rowPension = document.getElementById('row-pension');
            if(pensionDescuento > 0) {
                rowPension.classList.remove('hidden');
                document.getElementById('pension-display').innerText = '-' + pensionDescuento.toFixed(2) + 'â‚¬';
            } else {
                rowPension.classList.add('hidden');
            }

            document.getElementById('result-card').classList.remove('hidden');
        }
    </script>
</body>
</html>
